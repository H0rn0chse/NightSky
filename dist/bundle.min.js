/*
    @h0rn0chse/night-sky - dist/bundle.min.js
    version 1.0.5 - built at 2024-03-09
    @license MIT
*/
!function(){"use strict";const t=document.createElement("template");t.innerHTML="<style>#container{width:100%;height:100%;background:radial-gradient(ellipse at bottom,#1b2735 0,#090a0f 100%);overflow:hidden}.star{background:0 0}</style>";class e extends HTMLElement{static get observedAttributes(){return["layers","density","starcolor","velocity-x","velocity-y"]}connectedCallback(){this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(t.content.cloneNode(!0)),this._styles=document.createElement("style"),this.shadowRoot.appendChild(this._styles),this._container=document.createElement("div"),this._container.id="container",this.shadowRoot.appendChild(this._container),this.recalculateStyles(),this._observer=new ResizeObserver(this._handleResize.bind(this)),this._observer.observe(this._container)}_handleResize(){this._timer&&clearTimeout(this._timer),this._timer=setTimeout((()=>{this._timer=null,this.recalculateStyles()}),200)}attributeChangedCallback(t,e,n){if(null!=n&&e!==n){switch(t){case"starcolor":this.setAttribute(t,n);break;case"layers":case"density":case"velocity-x":case"velocity-y":this.setAttribute(t,parseInt(n,10));break;default:throw new Error(`The property ${t} is not supported`)}this.shadowRoot&&this.recalculateStyles()}}getOptions(){const t={starColor:this.getAttribute("starcolor")||"#FFF",layerCount:parseInt(this.getAttribute("layers"),10)||3,layers:[],density:parseInt(this.getAttribute("density"),10)||50,velocityX:parseInt(this.getAttribute("velocity-x")??"60",10),velocityY:parseInt(this.getAttribute("velocity-y")??"60",10),width:parseInt(this._container.clientWidth,10),height:parseInt(this._container.clientHeight,10)};let e=t.width*t.height/2073600*t.density;for(let n=0;n<t.layerCount;n++){e*=2;const n=[];for(let i=0;i<e;i++){const e=Math.round(Math.random()*t.width),i=Math.round(Math.random()*t.height);n.push({x:e,y:i}),n.push({x:e+t.width,y:i+t.height}),n.push({x:e+t.width,y:i}),n.push({x:e,y:i+t.height})}t.layers.push(n)}return t.baseSpeedX=t.width*(1/Math.abs(t.velocityX)),t.baseSpeedY=t.height*(1/Math.abs(t.velocityY)),t}recalculateStyles(){const t=this.getOptions(),e=JSON.parse(JSON.stringify(t));if(delete e.layers,JSON.stringify(e)!==JSON.stringify(this._lastOptions)){this._lastOptions=e,this._styles.innerHTML=function(t){let e="";t.layers.forEach(((n,i,s)=>{const a=t.layers.length-i,r=n.reduce(((e,n,i,s)=>e+`${n.x}px ${n.y}px ${t.starColor}${i<s.length-1?",":""}\n`),"");e+=`\n        #star_${i} {\n            animation: animStar_x ${t.baseSpeedX*(i+1)}s linear infinite;\n            // animation: animStar 3s linear infinite;\n        }\n        #star_${i} .inner {\n            width: ${a}px;\n            height: ${a}px;\n            box-shadow: ${r};\n            animation: animStar_y ${t.baseSpeedY*(i+1)}s linear infinite;\n            // animation: animStar 3s linear infinite;\n        }\n        // #star_${i}:after {\n        //     content: " ";\n        //     position: absolute;\n        //     top: ${t.height}px;\n        //     left: ${t.width}px;\n        //     width: ${a}px;\n        //     height: ${a}px;\n        //     background: transparent;\n        //     // box-shadow: ${r};\n        // }\n        `}));let n=0,i=0,s=0,a=0;return t.velocityX>0?s=-t.width:t.velocityX<0&&(n=-t.width),t.velocityY>0?a=-t.height:t.velocityY<0&&(i=-t.height),e+=`\n    @keyframes animStar_x {\n        from {\n            transform: translateX(${n}px);\n        }\n        to {\n            transform: translateX(${s}px);\n        }\n    }\n    @keyframes animStar_y {\n        from {\n            transform: translateY(${i}px);\n        }\n        to {\n            transform: translateY(${a}px);\n        }\n    }\n    `,e}(t),this._container.querySelectorAll(".star").forEach((t=>{t.remove()}));for(let e=0;e<t.layerCount;e++){const t=document.createElement("div");t.id=`star_${e}`,t.classList.add("star");const n=document.createElement("div");n.classList.add("star","inner"),t.appendChild(n),this._container.appendChild(t)}}}}window.customElements.define("night-sky",e)}();
